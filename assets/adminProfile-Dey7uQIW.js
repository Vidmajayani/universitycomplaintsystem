import{s as o}from"./supabaseClient-Du47UBJl.js";/* empty css              */import"./darkMode-DMjetaZp.js";const u=document.getElementById("adminName"),f=document.getElementById("adminRole"),g=document.getElementById("adminEmail"),E=document.getElementById("adminId"),d=document.getElementById("totalHandled"),r=document.getElementById("logoutBtn"),l=document.getElementById("headerLogoutBtn"),s=document.getElementById("defaultProfileIcon"),i=document.getElementById("profileImage");document.addEventListener("DOMContentLoaded",()=>{h(),p()});async function h(){const{data:{session:n}}=await o.auth.getSession();if(!n){window.location.href="Login.html";return}const{data:t,error:e}=await o.from("admin").select("*").eq("id",n.user.id).single();if(e||!t){console.error("Error fetching admin data:",e),alert("Failed to load profile.");return}u.textContent=`${t.adminfirstname} ${t.adminlastname}`,f.textContent=t.adminrole,g.textContent=t.adminemail,E.textContent=t.id,t.profile_pic?(i.src=t.profile_pic,i.classList.remove("hidden"),s.classList.add("hidden")):(i.classList.add("hidden"),s.classList.remove("hidden")),I(t.id,t.adminrole)}async function I(n,t){try{let e=o.from("complaint").select("complaintid",{count:"exact",head:!0});t!=="Master Admin"&&(e=e.eq("adminid",n));const{count:m,error:a}=await e;if(a)throw a;d.textContent=m||0}catch(e){console.error("Error loading stats:",e),d.textContent="-"}}function p(){r&&r.addEventListener("click",c),l&&l.addEventListener("click",c)}async function c(){const{error:n}=await o.auth.signOut();n?(console.error("Error signing out:",n),alert("Failed to log out.")):window.location.href="Login.html"}
