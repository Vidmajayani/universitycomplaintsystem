import{s as d}from"./darkMode-DwWyDh1G.js";const b=document.getElementById("adminName"),A=document.getElementById("adminRole"),N=document.getElementById("adminEmail"),C=document.getElementById("adminId"),v=document.getElementById("totalHandled"),p=document.getElementById("logoutBtn"),I=document.getElementById("headerLogoutBtn"),B=document.getElementById("defaultProfileIcon"),m=document.getElementById("profileImage");document.addEventListener("DOMContentLoaded",async()=>{const{data:{session:t}}=await d.auth.getSession();if(!t){window.location.href="Login.html";return}document.getElementById("mainContent").classList.remove("hidden"),w(),D()});async function w(){const{data:{session:t}}=await d.auth.getSession();if(!t){window.location.href="Login.html";return}const{data:e,error:o}=await d.from("admin").select("*").eq("id",t.user.id).single();if(o||!e){console.error("Error fetching admin data:",o),alert("Failed to load profile.");return}if(b.textContent=`${e.adminfirstname} ${e.adminlastname}`,A.textContent=e.adminrole,N.textContent=e.adminemail,C.textContent=e.id,e.profile_pic){m.src=e.profile_pic,m.classList.remove("hidden"),B.classList.add("hidden");const a=document.getElementById("profileButton");a&&(a.innerHTML=`
                <img src="${e.profile_pic}" alt="Profile" class="h-10 w-10 rounded-full object-cover border-2 border-white dark:border-gray-600 shadow-sm">
            `)}else m.classList.add("hidden"),B.classList.remove("hidden");x(e.id,e.adminrole);const i=document.getElementById("profileNavDashboard"),n=document.getElementById("profileNavAllComplaints"),f=document.getElementById("profileNavAnalytics"),u=document.getElementById("mobileProfileNavDashboard"),r=document.getElementById("mobileProfileNavAllComplaints"),g=document.getElementById("mobileProfileNavAnalytics"),h=document.getElementById("footerNavDashboard"),l=document.getElementById("footerNavAllComplaints"),y=document.getElementById("footerNavAnalytics"),c=document.querySelector("footer h2"),E=document.querySelector("footer p");if(e.adminrole==="LostAndFound Admin"){if(i&&(i.href="AdminLostFoundDashboard.html"),u&&(u.href="AdminLostFoundDashboard.html"),n&&(n.innerHTML="Lost Items",n.href="AdminLostFound.html"),r&&(r.textContent="Lost Items",r.href="AdminLostFound.html"),h&&(h.href="AdminLostFoundDashboard.html"),l){const a=l.querySelector("span"),L=l.querySelector("i");a&&(a.textContent="Lost Items"),L&&(L.className="fas fa-search"),l.href="AdminLostFound.html"}f&&(f.style.display="none"),g&&(g.style.display="none"),y&&(y.style.display="none"),c&&(c.textContent="ComplaNet Lost & Found",c.className="text-2xl font-heading font-bold mb-3 text-[var(--color-blue-btn)] dark:text-blue-400"),E&&(E.textContent="Administrative portal for managing university lost and found items. Monitor, verify, and resolve reports efficiently.")}}async function x(t,e){try{let o=d.from("complaint").select("complaintid",{count:"exact",head:!0});e!=="Master Admin"&&(o=o.eq("adminid",t));const{count:i,error:n}=await o;if(n)throw n;v.textContent=i||0}catch(o){console.error("Error loading stats:",o),v.textContent="-"}}function D(){p&&p.addEventListener("click",s),I&&I.addEventListener("click",s);const t=document.getElementById("logoutModal");if(t){const o=document.getElementById("cancelLogoutBtn"),i=document.getElementById("confirmLogoutBtn");o&&o.addEventListener("click",()=>{t.classList.add("hidden")}),i&&i.addEventListener("click",async()=>{const{error:n}=await d.auth.signOut();n&&console.error("Error signing out:",n),window.location.href="Login.html"}),t.addEventListener("click",n=>{n.target===t&&t.classList.add("hidden")})}const e=setInterval(()=>{const o=document.querySelector('#mobileMenu a[href="Login.html"]');if(o)o.addEventListener("click",s),clearInterval(e);else if(document.readyState==="complete"){const i=document.querySelector('#mobileMenu a[href="Login.html"]');i&&i.addEventListener("click",s),clearInterval(e)}},100)}function s(t){t&&t.preventDefault();const e=document.getElementById("logoutModal");e&&e.classList.remove("hidden")}
