import{s as i}from"./supabaseClient-Du47UBJl.js";/* empty css              */import"./darkMode-DMjetaZp.js";const u=document.getElementById("adminName"),f=document.getElementById("adminRole"),g=document.getElementById("adminEmail"),E=document.getElementById("adminId"),r=document.getElementById("totalHandled"),l=document.getElementById("logoutBtn"),s=document.getElementById("headerLogoutBtn"),c=document.getElementById("defaultProfileIcon"),d=document.getElementById("profileImage");document.addEventListener("DOMContentLoaded",()=>{h(),y()});async function h(){const{data:{session:n}}=await i.auth.getSession();if(!n){window.location.href="Login.html";return}const{data:e,error:t}=await i.from("admin").select("*").eq("id",n.user.id).single();if(t||!e){console.error("Error fetching admin data:",t),alert("Failed to load profile.");return}if(u.textContent=`${e.adminfirstname} ${e.adminlastname}`,f.textContent=e.adminrole,g.textContent=e.adminemail,E.textContent=e.id,e.profile_pic){d.src=e.profile_pic,d.classList.remove("hidden"),c.classList.add("hidden");const o=document.getElementById("profileButton");o&&(o.innerHTML=`
                <img src="${e.profile_pic}" alt="Profile" class="h-10 w-10 rounded-full object-cover border-2 border-white dark:border-gray-600 shadow-sm">
            `)}else d.classList.add("hidden"),c.classList.remove("hidden");p(e.id,e.adminrole)}async function p(n,e){try{let t=i.from("complaint").select("complaintid",{count:"exact",head:!0});e!=="Master Admin"&&(t=t.eq("adminid",n));const{count:o,error:a}=await t;if(a)throw a;r.textContent=o||0}catch(t){console.error("Error loading stats:",t),r.textContent="-"}}function y(){l&&l.addEventListener("click",m),s&&s.addEventListener("click",m)}async function m(){const{error:n}=await i.auth.signOut();n?(console.error("Error signing out:",n),alert("Failed to log out.")):window.location.href="Login.html"}
