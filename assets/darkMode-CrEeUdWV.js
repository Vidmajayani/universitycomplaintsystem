import{s as c}from"./supabaseClient-DP-aSKaS.js";const r=window.location.pathname.split("/").pop(),g=["Login.html","ResetPassword.html","ChangePassword.html"];g.includes(r)||(async()=>{const{data:{session:e}}=await c.auth.getSession();e||(window.location.href="Login.html")})();const u=[document.getElementById("darkModeToggle"),document.getElementById("mobileDarkModeToggle")],i=document.getElementById("mobileMenuButton"),a=document.getElementById("mobileMenu"),o=document.getElementById("overlay"),s=document.getElementById("profileButton"),n=document.getElementById("profileMenu");function m(){document.documentElement.classList.toggle("dark"),localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light")}u.forEach(e=>{e&&e.addEventListener("click",m)});(localStorage.getItem("theme")==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.documentElement.classList.add("dark");i&&a&&(i.addEventListener("click",()=>{a.classList.toggle("-translate-x-full"),o&&o.classList.toggle("hidden")}),o&&o.addEventListener("click",()=>{a.classList.add("-translate-x-full"),o.classList.add("hidden")}));s&&n&&(s.addEventListener("click",e=>{e.stopPropagation(),n.classList.toggle("hidden")}),document.addEventListener("click",e=>{!n.classList.contains("hidden")&&!s.contains(e.target)&&n.classList.add("hidden")}));async function h(e){e.preventDefault();try{const{error:t}=await c.auth.signOut();if(t){console.error("Error signing out:",t),alert("Error logging out. Please try again.");return}localStorage.clear(),window.location.href="Login.html"}catch(t){console.error("Unexpected logout error:",t),alert("Error logging out. Please try again.")}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll('a[href="Login.html"]');console.log(`[darkMode.js] Found ${e.length} links to Login.html`),e.forEach((t,d)=>{const l=t.textContent.replace(/\s+/g," ").trim().toLowerCase();console.log(`[darkMode.js] Link ${d}: "${l}"`),(l.includes("log out")||l.includes("logout"))&&(t.addEventListener("click",h),console.log(`[darkMode.js] âœ… Attached logout handler to link ${d}`))})});
