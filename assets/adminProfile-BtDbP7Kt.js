import{s as o}from"./supabaseClient-Du47UBJl.js";/* empty css              */import"./darkMode-DMjetaZp.js";const u=document.getElementById("adminName"),f=document.getElementById("adminRole"),g=document.getElementById("adminEmail"),h=document.getElementById("adminId"),r=document.getElementById("totalHandled"),l=document.getElementById("logoutBtn"),s=document.getElementById("headerLogoutBtn"),c=document.getElementById("defaultProfileIcon"),a=document.getElementById("profileImage");document.addEventListener("DOMContentLoaded",async()=>{const{data:{session:e}}=await o.auth.getSession();if(!e){window.location.href="Login.html";return}E(),y()});async function E(){const{data:{session:e}}=await o.auth.getSession();if(!e){window.location.href="Login.html";return}const{data:t,error:n}=await o.from("admin").select("*").eq("id",e.user.id).single();if(n||!t){console.error("Error fetching admin data:",n),alert("Failed to load profile.");return}if(u.textContent=`${t.adminfirstname} ${t.adminlastname}`,f.textContent=t.adminrole,g.textContent=t.adminemail,h.textContent=t.id,t.profile_pic){a.src=t.profile_pic,a.classList.remove("hidden"),c.classList.add("hidden");const i=document.getElementById("profileButton");i&&(i.innerHTML=`
                <img src="${t.profile_pic}" alt="Profile" class="h-10 w-10 rounded-full object-cover border-2 border-white dark:border-gray-600 shadow-sm">
            `)}else a.classList.add("hidden"),c.classList.remove("hidden");p(t.id,t.adminrole)}async function p(e,t){try{let n=o.from("complaint").select("complaintid",{count:"exact",head:!0});t!=="Master Admin"&&(n=n.eq("adminid",e));const{count:i,error:d}=await n;if(d)throw d;r.textContent=i||0}catch(n){console.error("Error loading stats:",n),r.textContent="-"}}function y(){l&&l.addEventListener("click",m),s&&s.addEventListener("click",m)}async function m(){const{error:e}=await o.auth.signOut();e?(console.error("Error signing out:",e),alert("Failed to log out.")):window.location.href="Login.html"}
