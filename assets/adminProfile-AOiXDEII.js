import{s as o}from"./supabaseClient-Du47UBJl.js";/* empty css              */import"./darkMode-DMjetaZp.js";const u=document.getElementById("adminName"),f=document.getElementById("adminRole"),g=document.getElementById("adminEmail"),h=document.getElementById("adminId"),r=document.getElementById("totalHandled"),l=document.getElementById("logoutBtn"),s=document.getElementById("headerLogoutBtn"),c=document.getElementById("defaultProfileIcon"),a=document.getElementById("profileImage");document.addEventListener("DOMContentLoaded",async()=>{const{data:{session:t}}=await o.auth.getSession();if(!t){window.location.href="Login.html";return}document.getElementById("mainContent").classList.remove("hidden"),E(),y()});async function E(){const{data:{session:t}}=await o.auth.getSession();if(!t){window.location.href="Login.html";return}const{data:e,error:n}=await o.from("admin").select("*").eq("id",t.user.id).single();if(n||!e){console.error("Error fetching admin data:",n),alert("Failed to load profile.");return}if(u.textContent=`${e.adminfirstname} ${e.adminlastname}`,f.textContent=e.adminrole,g.textContent=e.adminemail,h.textContent=e.id,e.profile_pic){a.src=e.profile_pic,a.classList.remove("hidden"),c.classList.add("hidden");const i=document.getElementById("profileButton");i&&(i.innerHTML=`
                <img src="${e.profile_pic}" alt="Profile" class="h-10 w-10 rounded-full object-cover border-2 border-white dark:border-gray-600 shadow-sm">
            `)}else a.classList.add("hidden"),c.classList.remove("hidden");p(e.id,e.adminrole)}async function p(t,e){try{let n=o.from("complaint").select("complaintid",{count:"exact",head:!0});e!=="Master Admin"&&(n=n.eq("adminid",t));const{count:i,error:d}=await n;if(d)throw d;r.textContent=i||0}catch(n){console.error("Error loading stats:",n),r.textContent="-"}}function y(){l&&l.addEventListener("click",m),s&&s.addEventListener("click",m)}async function m(){const{error:t}=await o.auth.signOut();t?(console.error("Error signing out:",t),alert("Failed to log out.")):window.location.href="Login.html"}
