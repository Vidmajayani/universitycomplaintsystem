import{s as o}from"./supabaseClient-Du47UBJl.js";/* empty css              */import"./darkMode-DMjetaZp.js";document.addEventListener("DOMContentLoaded",m);async function m(){const{data:{user:t}}=await o.auth.getUser();if(!t){window.location.href="Login.html";return}const n=t.id,{data:e,error:a}=await o.from("users").select("*").eq("id",n).single();if(a){console.error("Error loading profile:",a);return}document.getElementById("fullName").textContent=e.first_name+" "+e.last_name,document.getElementById("email").textContent=t.email,document.getElementById("department").textContent=e.department,document.getElementById("role").textContent=e.role,document.getElementById("fullNameInput").value=e.first_name+" "+e.last_name,document.getElementById("emailInput").value=t.email,document.getElementById("departmentInput").value=e.department,document.getElementById("phoneInput").value=e.phone||"",document.getElementById("displayNameInput").value=e.display_name||"",e.profile_image_url&&(document.getElementById("profileImage").src=e.profile_image_url),r(n)}function r(t){document.getElementById("profileForm").addEventListener("submit",async n=>{n.preventDefault();const e=document.getElementById("phoneInput").value.trim(),a=document.getElementById("displayNameInput").value.trim(),{error:l}=await o.from("users").update({phone:e,display_name:a}).eq("id",t);if(l){alert("Failed to update profile: "+l.message);return}alert("Profile updated successfully!")})}
