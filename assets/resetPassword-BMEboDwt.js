import{s}from"./supabaseClient-Du47UBJl.js";/* empty css              */document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("resetForm");o.addEventListener("submit",async n=>{n.preventDefault();const r=document.getElementById("email").value.trim();if(!r){alert("Please enter your email.");return}try{let e=!1;const{data:i}=await s.from("admin").select("id").eq("adminemail",r).maybeSingle();if(i)e=!0;else{const{data:l,error:a}=await s.from("users").select("id").eq("email",r).maybeSingle();l&&(e=!0),a&&a.code!=="PGRST116"&&console.warn("Could not verify/search users table:",a)}if(!e){alert("This email is not registered in our system.");return}const{data:m,error:t}=await s.auth.resetPasswordForEmail(r,{redirectTo:new URL("ChangePassword.html",window.location.href).href});if(t){alert("Error sending reset email: "+t.message),console.error(t);return}alert("Password reset email sent! Please check your inbox."),o.reset()}catch(e){console.error("Unexpected error:",e),alert("Unexpected error: "+e.message)}})});
