import{s as d}from"./supabaseClient-Du47UBJl.js";/* empty css              */document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("password"),a=document.getElementById("togglePassword"),s=document.getElementById("eyeIcon"),e=document.getElementById("eyeOffIcon");a&&a.addEventListener("click",()=>{t.type==="password"?(t.type="text",s.classList.remove("hidden"),e.classList.add("hidden")):(t.type="password",s.classList.add("hidden"),e.classList.remove("hidden"))})});document.getElementById("loginForm").addEventListener("submit",async t=>{t.preventDefault();const a=document.getElementById("email").value,s=document.getElementById("password").value;try{const{data:e,error:i}=await d.auth.signInWithPassword({email:a,password:s});if(i){alert("Login failed: "+i.message);return}if(!e||!e.user){alert("Login failed: No user data returned.");return}const r=e.user.id,{data:n,error:m}=await d.from("admin").select("adminfirstname, adminlastname, adminrole").eq("id",r).single();if(n){localStorage.setItem("isAdminLoggedIn","true"),localStorage.setItem("adminId",r),localStorage.setItem("adminFirstName",n.adminfirstname),localStorage.setItem("adminLastName",n.adminlastname),localStorage.setItem("adminRole",n.adminrole),window.location.href="AdminDashboard.html";return}const{data:o,error:l}=await d.from("users").select("first_name, last_name, username").eq("id",r).single();if(o){localStorage.setItem("userId",r),localStorage.setItem("firstName",o.first_name),localStorage.setItem("lastName",o.last_name),localStorage.setItem("username",o.username),window.location.href="UserDashboard.html";return}alert("Login successful, but no profile found in Admin or Users table."),await d.auth.signOut()}catch(e){console.error("Login error:",e),alert("Unexpected error: "+e.message)}});
